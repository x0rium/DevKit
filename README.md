# DevKit — AI-Native Development Methodology

> Полный цикл разработки с AI от идеи до верифицированного продукта.

---

## Проблема которую решает DevKit

Существующие инструменты AI-разработки (SpecKit и подобные) описывают только середину цикла — реализацию. Они не знают что было до и что будет после. Это приводит к:

- AI хитрит и упрощает потому что нет доказанного основания
- архитектурные решения принимаются молча внутри спек
- новые требования ломают всё потому что нет impact analysis
- баги в либах или UX проблемы обнаруживаются после реализации
- тесты проверяют код, а не архитектурные инварианты

DevKit — это **upstream layer** над SpecKit. Не конкурент, не форк — экосистема из пяти уровней где каждый генерирует артефакты для следующего.

---

## Быстрый старт

```bash
# 1. Установить spec-kit CLI
uv tool install specify-cli --from git+https://github.com/github/spec-kit.git

# 2. Добавить DevKit skills в свой агент
#    (Claude Code, Cursor, VS Code Copilot — любой Agent Skills совместимый)

# 3. В папке проекта запустить
/devkit-init
```

DevKit автоматически определит состояние проекта и выберет нужный режим.

---

## Режимы инициализации

| Что найдено в проекте | Режим | Что происходит |
|----------------------|-------|----------------|
| Пустая папка | Greenfield | Создаёт .devkit/ + .specify/, старт с ResearchKit |
| Код без .devkit/ | Brownfield | Реконструирует инварианты из кода, выявляет gaps |
| .specify/ без .devkit/ | Upgrade | Извлекает артефакты из constitution.md, связывает |
| .devkit/ уже есть | Status | Показывает текущее состояние |

---

## Пять уровней

```
[ResearchKit]   → "возможно ли это вообще?"
      ↓
[ProductKit]    → "что именно строим и для кого?"
      ↓
[ArchKit]       → "как это устроено технически?"
      ↓
[SpecKit]       → "строим" (github/spec-kit)
      ↓
[QAKit]         → "работает ли это как мы решили?"
      ↓
      └── эскалация событий на любой уровень вверх
```

---

## Ключевые принципы

### 1. Фазовая дисциплина
AI знает на каком уровне находится и не может перепрыгнуть вперёд. На каждом уровне есть явные ALLOWED и FORBIDDEN действия. Переход возможен только когда уровень закрыт.

### 2. Артефакты как источник истины
Каждый уровень производит машиночитаемые артефакты которые следующий уровень получает на вход. Не markdown для людей — структурированные документы со схемой.

### 3. Инварианты как контракты
Система описывается через то что она **гарантирует**, а не через то как реализована. Инварианты бывают технические (ArchKit) и UX (ProductKit). Нарушение инварианта — блокер.

### 4. Детектор событий
AI в процессе диалога распознаёт тип события и автоматически переключает уровень — без явных команд от разработчика:

| Событие | Триггер | Действие |
|---------|---------|----------|
| RFC | "нам ещё нужно X", "добавь Y" | Стоп SpecKit → ArchKit delta-цикл |
| Investigation | "баг в либе", "бенчмарк упал" | Стоп SpecKit → ArchKit Investigation |
| Product Blocker | "неудобно использовать", "много параметров" | Стоп SpecKit → ProductKit investigation |
| QA Эскалация | тест упал | Анализ уровня → эскалация куда нужно |

### 5. Явная цена изменений
Любое изменение проходит impact analysis до принятия решения. Разработчик видит стоимость до действия, а не после.

---

## Структура артефактов

```
.devkit/
  STATUS.md               ← текущая фаза, прогресс
  research/
    market.md             ← аналоги, ниши, конкуренты
    feasibility.md        ← техническая реализуемость
    unknowns.md           ← карта неизвестного
    assumptions.md        ← что предполагаем, риск каждого
  product/
    users.md              ← кто пользователь, сценарии
    ux_invariants.md      ← UX гарантии системы
    roadmap.md            ← фазы, приоритеты, anti-scope
  arch/
    invariants.md         ← технические инварианты
    impact.md             ← карта зависимостей решений
    constitution.md       ← генерируется → копируется в .specify/
    decisions/
      ADR-XXX.md          ← Architecture Decision Records
      RFC-XXX.md          ← Requests for Change
      INV-XXX.md          ← Investigations
  qa/
    test_contracts.md     ← тест для каждого инварианта
    assumption_checks.md  ← валидация assumptions из research
    coverage_map.md       ← какие инварианты покрыты
    escalations/          ← история эскалаций

.specify/                 ← github/spec-kit (не редактировать вручную)
  constitution.md         ← OWNED BY ArchKit, не редактировать
  spec.md
  plan.md
  tasks/
```

---

## Жизненный цикл

### Нормальный флоу (greenfield)
```
Идея → ResearchKit → ProductKit → ArchKit → SpecKit → QAKit
```

### RFC — новые требования в процессе разработки
```
Разработчик упоминает новое требование
  → AI детектирует → проверяет invariants.md
  → затронуты инварианты? → стоп, RFC, ArchKit delta-цикл
  → не затронуты? → просто новая спека, продолжаем
```

### Investigation — технический блокер
```
Баг в либе / провал бенчмарка / неожиданное ограничение
  → AI детектирует нарушение допущения из ADR
  → открывает Investigation
  → варианты с явной ценой → разработчик решает
  → фиксируется, затронутые спеки обновляются
```

### Product Blocker — UX проблема
```
"Слишком много параметров", "неудобно использовать"
  → нарушение UX инварианта из ux_invariants.md
  → ProductKit investigation
  → пересмотр UX инвариантов → спускается в ArchKit
```

### QA Эскалация
```
Тест упал → анализ:
  код ≠ спека?              → фикс в SpecKit
  нарушен инвариант?        → Investigation в ArchKit
  неверный инвариант?       → RFC в ArchKit/ProductKit
  assumption оказался ложным → ResearchKit revision
```

---

## Отношение к github/spec-kit

DevKit не заменяет spec-kit. SpecKit — это уровень 4 экосистемы.

```
Без DevKit:
  разработчик → пишет constitution вручную
             → AI додумывает архитектуру сам
             → хитрит потому что основания нет

С DevKit:
  ArchKit генерирует constitution.md из верифицированных решений
  SpecKit получает доказанное основание
  AI не может отклониться — инварианты зафиксированы
```

---

## Agent Skills

DevKit распространяется как набор [Agent Skills](https://agentskills.io) — открытого стандарта Anthropic. Работает с любым совместимым агентом: Claude Code, Cursor, VS Code Copilot, Goose и другими.

Каждый уровень — отдельный skill который загружается только когда нужен (progressive disclosure). ResearchKit не занимает контекст пока ты в середине SpecKit реализации.

---

## Skills

| Skill | Когда активируется |
|-------|-------------------|
| [devkit-init](./devkit-init/) | "init devkit", "setup devkit", старт проекта |
| [research-kit](./ResearchKit/) | новая идея, "does this exist", feasibility вопросы |
| [product-kit](./ProductKit/) | "кто пользователь", "что MVP", UX вопросы |
| [arch-kit](./ArchKit/) | архитектура, RFC, Investigation, технические блокеры |
| [spec-kit](./SpecKit/) | реализация + детектор событий для эскалации |
| [qa-kit](./QAKit/) | тестирование, упавшие тесты, coverage |
